# Проект для анализа и управления заказами

Этот проект предназначен для анализа и управления заказами с использованием базы данных PostgreSQL. Он включает в себя различные функции для работы с данными, такие как поиск заказов, анализ KPI, экспорт данных в CSV и многое другое.

## Установка и настройка

1. **Установка зависимостей**:
   Убедитесь, что у вас установлены все необходимые зависимости. Для этого выполните команду:
   ```bash
   pip install -r requirements.txt
   ```

2. **Настройка базы данных**:
   - Создайте файл `db_info.ini` в корневой директории проекта.
   - Заполните его данными для подключения к вашей базе данных PostgreSQL:
     ```ini
     [postgres-sample-db]
     dbname=DBNAME
     user=USER
     password=PASSWOED
     host=LOCALHOST
     port=5432
     ```

## Использование

Проект предоставляет интерактивное меню для выполнения различных операций с данными. Запустите скрипт `main.py`, чтобы начать работу:

```bash
python main.py
```

### Основные функции

1. **Поиск заказа по номеру**:
   - Позволяет найти заказ по его номеру.

2. **Показать заказы за сегодня**:
   - Выводит список заказов, созданных сегодня.

3. **Конец сборки заказа**:
   - Записывает время окончания сборки заказа.

4. **Начало сборки заказа**:
   - Записывает время начала сборки заказа.

5. **Внести данные в money**:
   - Добавляет финансовые данные по заказам.

6. **Внести данные в kupiflakon**:
   - Добавляет данные о заказах в таблицу `kupiflakon`.

7. **Статистика за определенный период**:
   - Показывает статистику заказов за выбранный период.

8. **Обновить данные по местам**:
   - Обновляет количество мест в заказах.

9. **Занести данные в jambs**:
   - Добавляет данные о проблемах (ошибках) в заказах.

10. **Поиск дубликатов**:
    - Ищет дубликаты заказов по номеру.

11. **Экспорт данных в CSV**:
    - Экспортирует данные в CSV файл.

12. **Анализ KPI**:
    - Анализирует ключевые показатели эффективности (KPI) на основе данных заказов.

## Структура проекта

- `main.py`: Основной скрипт для запуска программы.
- `db_info.ini`: Файл конфигурации для подключения к базе данных.
- `db_config.py`: Скрипт для чтения конфигурации базы данных.

Основные функции и их описание

1. Поиск заказа по номеру
Функция позволяет найти заказ по его номеру. Пользователь вводит номер заказа, и программа выводит соответствующую информацию из базы данных.

2. Показать заказы за сегодня
Функция выводит список заказов, созданных за текущий день. Пользователь может указать количество последних заказов, которые он хочет увидеть.

3. Конец сборки заказа
Функция записывает время окончания сборки заказа. Пользователь вводит ID заказа, и программа сохраняет текущее время как время окончания сборки.

4. Начало сборки заказа
Функция записывает время начала сборки заказа. Пользователь вводит ID заказа, и программа сохраняет текущее время как время начала сборки.

5. Внести данные в money
Функция позволяет добавить финансовые данные по заказам. Пользователь вводит ID заказа, сумму заказа и сумму доставки, после чего программа сохраняет эти данные в таблице money.

6. Внести данные в kupiflakon
Функция позволяет добавить данные о заказах в таблицу kupiflakon. Пользователь вводит данные о заказе, такие как номер, количество мест, транспортную компанию и филиал.

7. Статистика за определенный период
Функция выводит статистику заказов за выбранный период. Пользователь указывает начальную и конечную даты, и программа выводит общую сумму заказов, количество заказов и среднюю сумму заказа.

8. Обновить данные по местам
Функция позволяет обновить количество мест в заказах. Пользователь вводит ID заказа и новое количество мест, и программа обновляет соответствующие данные в базе.

9. Занести данные в jambs
Функция позволяет добавить данные о проблемах (ошибках) в заказах. Пользователь вводит ID заказа, количество мест и статус проблемы (например, "Ошибка", "Недовложение" и т.д.), и программа сохраняет эти данные в таблице jambs.

10. Поиск дубликатов
Функция ищет дубликаты заказов по номеру. Программа выводит список заказов с одинаковыми номерами, если такие имеются.

11. Экспорт данных в CSV
Функция экспортирует данные о заказах в CSV файл. Программа выполняет SQL-запрос к базе данных и сохраняет результаты в файл с текущей датой в названии.

12. Анализ KPI
Функция анализирует ключевые показатели эффективности (KPI) на основе данных заказов. Программа рассчитывает среднее время сборки заказа, среднюю производительность сборки, среднюю скорость сборки и другие показатели. Результаты анализа выводятся в консоль и сохраняются в CSV файл.

Выберите нужную функцию из меню, введя соответствующий номер. Например, для поиска заказа по номеру введите 1.

Следуйте инструкциям на экране. Например, для поиска заказа по номеру введите номер заказа, и программа выведет соответствующую информацию.

Для выхода из программы введите 0.

Технические детали
База данных: PostgreSQL

Основные библиотеки: psycopg2, pandas, configparser, datetime, numpy, csv, os

[Дашборд](https://datalens.yandex/reu8ry88j65ud)
